// translation.js

const translations = {
    el: {
        "logo-alt": "AR Akron Services Logo",
        "hero-title-line1": "Ο Ψηφιακός σου Κόσμος",
        "hero-title-line2": "Όπως τον Ονειρεύεσαι",
        "hero-subtitle": "Στην AR Akron Services μετατρέπουμε κάθε σου ιδέα σε πραγματικότητα: websites, web εφαρμογές, blogs — όλα σχεδιασμένα αποκλειστικά για εσάς, χωρίς περιορισμούς. Εδώ, δεν υπάρχουν έτοιμες λύσεις. Υπάρχει μόνο η δική σας.",
        "cta-services": "Οι Υπηρεσίες μας",
        "cta-quote": "Ζήτα Προσφορά",
        "nav-services": "Υπηρεσιες",
        "nav-highlights": "Akron",
        "nav-portfolio": "Εργα",
        "nav-contact": "Επικοινωνια",
        "services-heading": "Οι Υπηρεσίες μας",
        "card1-title": "Κατασκευή Ιστοσελίδων",
        "card1-description": "Δημιουργούμε εικαστικά άρτιες και τεχνικά άψογες ιστοσελίδες, φτιαγμένες από το μηδέν – χωρίς έτοιμα templates, μόνο αυθεντικός, βελτιστοποιημένος κώδικας.",
        "card2-title": "Web Εφαρμογές",
        "card2-description": "Αναπτύσσουμε προσαρμοσμένες εφαρμογές για την επιχείρησή σας — από συστήματα κρατήσεων μέχρι διαχείριση δεδομένων. Αξιοπιστία, ασφάλεια και λειτουργικότητα.",
        "card3-title": "Blogs & Προσωπικά Sites",
        "card3-description": "Εκφραστείτε ελεύθερα μέσα από ένα blog ή προσωπική ιστοσελίδα με μοντέρνο σχεδιασμό, ταχύτητα και δυνατότητες επέκτασης. Το περιεχόμενό σας αξίζει την καλύτερη παρουσίαση.",
        "highlights-heading": "Γιατί να επιλέξεις την AR Akron Services",
        "highlight1-heading": "100% Custom",
        "highlight1-description": "Δεν χρησιμοποιούμε πλατφόρμες drag & drop. Ό,τι βλέπετε είναι γραμμένο αποκλειστικά για εσάς.",
        "highlight2-heading": "Mobile First",
        "highlight2-description": "Όλα μας τα έργα σχεδιάζονται πρώτα για κινητές συσκευές, ώστε να φαίνονται τέλεια παντού.",
        "highlight3-heading": "Συνεργασία σε Βάθος",
        "highlight3-description": "Μαθαίνουμε τι πραγματικά θέλετε και δημιουργούμε μαζί ένα προϊόν που σας αντιπροσωπεύει.",
        "portfolio-heading": "Κάθε Project, Μια Νέα Πρόκληση",
        "portfolio-subtitle": "Πιστεύουμε στην καινοτομία και στον συνεχή διάλογο μαζί σας για να δημιουργήσουμε κάτι μοναδικό.",
        "contact-ticker": "Custom λύσεις για το ψηφιακό σου όραμα — Websites | Apps | Blogs — Η δική σου μοναδική παρουσία, η δική μας τεχνογνωσία — Αξιοπιστία και ασφάλεια που μπορείς να εμπιστευθείς — Επικοινώνησε για το custom project σου — Custom λύσεις για το ψηφιακό σου όραμα — Websites | Apps | Blogs — Η δική σου μοναδική παρουσία, η δική μας τεχνογνωσία — Αξιοπιστία και ασφάλεια που μπορείς να εμπιστευθείς — Επικοινώνησε για το custom project σου! — Custom λύσεις για το ψηφιακό σου όραμα — Websites | Apps | Blogs — Η δική σου μοναδική παρουσία, η δική μας τεχνογνωσία — Αξιοπιστία και ασφάλεια που μπορείς να εμπιστευθείς — Επικοινώνησε για το custom project σου! —",
        "contact-heading": "Επικοινωνία",
        "contact-form-heading": "Επικοινωνία",
        "form-name-placeholder": "Όνομα",
        "form-email-placeholder": "Email",
        "form-message-placeholder": "Το μήνυμά σας",
        "form-submit-button": "Αποστολή",
        "footer-text": "© 2025 AR Akron Services",
        "terms-accept": "Αποδέχομαι τους",
        "terms-of-use": "Όρους Χρήσης",
        "and": "και την",
        "privacy-policy": "Πολιτική Απορρήτου",
        "form-consent-text": "Διάβασα και αποδέχομαι την [[privacy_link]] και τους [[terms_link]].",
        'cookie-banner-text': 'Χρησιμοποιούμε cookies για να διασφαλίσουμε την καλύτερη δυνατή εμπειρία στον ιστότοπό μας. Συνεχίζοντας τη χρήση του site, αποδέχεστε τη χρήση cookies. Για περισσότερες πληροφορίες, διαβάστε την [[cookie_link]] μας.',
        'cookie-banner-link': 'Πολιτική Cookies',
        'cookie-banner-accept': 'Αποδοχή Όλων',
        'cookie-banner-decline': 'Απόρριψη (εκτός απαραίτητων)',
        "contact-address": "Γρίβα Διγενή 2, 17342 <br>Αγ Δημήτριος, Αττική"
    },
    en: {
        "logo-alt": "AR Akron Services Logo",
        "hero-title-line1": "Your Digital World",
        "hero-title-line2": "As You Dreamt It",
        "hero-subtitle": "At AR Akron Services, we turn your every idea into reality: websites, web applications, blogs — all designed exclusively for you, without limitations. Here, there are no ready-made solutions. There is only yours.",
        "cta-services": "Our Services",
        "cta-quote": "Get a Quote",
        "nav-services": "Services",
        "nav-highlights": "Akron",
        "nav-portfolio": "Projects",
        "nav-contact": "Contact",
        "services-heading": "Our Services",
        "card1-title": "Website Development",
        "card1-description": "We create aesthetically perfect and technically flawless websites, built from scratch – no ready-made templates, just authentic, optimized code.",
        "card2-title": "Web Applications",
        "card2-description": "We develop customized applications for your business — from booking systems to data management. Reliability, security, and functionality.",
        "card3-title": "Blogs & Personal Sites",
        "card3-description": "Express yourself freely through a blog or personal website with modern design, speed, and expandability. Your content deserves the best presentation.",
        "highlights-heading": "Why Choose AR Akron Services",
        "highlight1-heading": "100% Custom",
        "highlight1-description": "We don't use drag & drop platforms. Everything you see is written exclusively for you.",
        "highlight2-heading": "Mobile First",
        "highlight2-description": "All our projects are designed for mobile devices first, so they look perfect everywhere.",
        "highlight3-heading": "In-depth Collaboration",
        "highlight3-description": "We learn what you truly want and create a product together that represents you.",
        "portfolio-heading": "Every Project, A New Challenge",
        "portfolio-subtitle": "We believe in innovation and continuous dialogue with you to create something unique.",
        "contact-ticker": "Custom solutions for your digital vision — Websites | Apps | Blogs — Your unique presence, our expertise — Reliability and security you can trust — Contact us for your custom project — Custom solutions for your digital vision — Websites | Apps | Blogs — Your unique presence, our expertise — Reliability and security you can trust — Contact us for your custom project! — Custom solutions for your digital vision — Websites | Apps | Blogs — Your unique presence, our expertise — Reliability and security you can trust — Contact us for your custom project! —",
        "contact-heading": "Contact Us",
        "contact-form-heading": "Contact Us",
        "form-name-placeholder": "Name",
        "form-email-placeholder": "Email",
        "form-message-placeholder": "Your Message",
        "form-submit-button": "Send",
        "terms-accept": "I accept the",
        "terms-of-use": "Terms of Use",
        "and": "and the",
        "privacy-policy": "Privacy Policy",
        "footer-text": "© 2025 AR Akron Services",
        "form-consent-text": "I have read and accept the [[privacy_link]] and the [[terms_link]].",
        'cookie-banner-text': 'We use cookies to ensure the best possible experience on our website. By continuing to use this site, you accept the use of cookies. For more information, please read our [[cookie_link]].',
        'cookie-banner-link': 'Cookie Policy',
        'cookie-banner-accept': 'Accept All',
        'cookie-banner-decline': 'Decline (except essential)',
        "contact-address": "Griva Digeni 2, 17342 <br>Agios Dimitrios, Attica"
    }
};

// Function to apply the translation
function translatePage(lang) {
    const termsPdfPath = `1-${lang}.pdf`;
    const privacyPdfPath = `2-${lang}.pdf`;
    const cookiePolicyPdfPath = `3-${lang}.pdf`;

    const elements = document.querySelectorAll('[data-translate-key]');
    const currentTranslations = translations[lang];

    if (!currentTranslations) {
        console.error("Translations not found for language:", lang);
        return;
    }

    elements.forEach(element => {
        const key = element.getAttribute('data-translate-key');
        const translation = currentTranslations[key];

        if (translation === undefined) {
            console.warn("Translation key not found:", key, "for language:", lang);
            return;
        }

        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
            element.placeholder = translation;
        } else if (element.tagName === 'IMG') {
            element.alt = translation;
        } else if (element.tagName === 'A') {
            // **ΕΙΔΙΚΟΣ ΧΕΙΡΙΣΜΟΣ ΓΙΑ ΤΟΝ ΣΥΝΔΕΣΜΟ ΤΗΣ ΔΙΕΥΘΥΝΣΗΣ**
            if (key === 'contact-address') {
                // Εφόσον το HTML δεν αλλάζει, χρησιμοποιούμε innerHTML για να αποδοθεί το <br>
                element.innerHTML = translation;
            } else if (key === 'terms-of-use') {
                element.href = termsPdfPath;
                element.textContent = translation;
            } else if (key === 'privacy-policy') {
                element.href = privacyPdfPath;
                element.textContent = translation;
            } else if (key === 'cookie-banner-link') {
                element.href = cookiePolicyPdfPath;
                element.textContent = translation;
            } else {
                // Για όλους τους άλλους συνδέσμους
                element.textContent = translation;
            }
        } else if (element.tagName === 'TEXT' && element.closest('svg')) {
            element.textContent = translation;
        } else {
            // Για τα περισσότερα στοιχεία (p, span, div, h1-h6, button κλπ.)
            element.innerHTML = translation;
        }
    });

    const consentLabel = document.querySelector('label[data-translate-key="form-consent-text"]');
    if (consentLabel) {
        const termsAcceptText = currentTranslations["terms-accept"] || 'Αποδέχομαι τους';
        const andText = currentTranslations["and"] || 'και την';

        const privacyLinkHtml = `<a href="${privacyPdfPath}" target="_blank">${currentTranslations["privacy-policy"]}</a>`;
        const termsLinkHtml = `<a href="${termsPdfPath}" target="_blank">${currentTranslations["terms-of-use"]}</a>`;

        let translatedConsentText = currentTranslations["form-consent-text"] || '';
        translatedConsentText = translatedConsentText.replace('[[privacy_link]]', privacyLinkHtml);
        translatedConsentText = translatedConsentText.replace('[[terms_link]]', termsLinkHtml);

        consentLabel.innerHTML = translatedConsentText;
    }

    const cookieBannerTextElement = document.querySelector('.cookie-banner p[data-translate-key="cookie-banner-text"]');
    if (cookieBannerTextElement) {
        const cookieBannerLinkHtml = `<a href="${cookiePolicyPdfPath}" target="_blank">${currentTranslations["cookie-banner-link"]}</a>`;
        let translatedCookieText = currentTranslations["cookie-banner-text"] || '';
        translatedCookieText = translatedCookieText.replace('[[cookie_link]]', cookieBannerLinkHtml);
        cookieBannerTextElement.innerHTML = translatedCookieText;

        const acceptButton = document.getElementById('acceptCookies');
        const declineButton = document.getElementById('declineCookies');
        if (acceptButton) {
            acceptButton.textContent = currentTranslations["cookie-banner-accept"] || acceptButton.textContent;
        }
        if (declineButton) {
            declineButton.textContent = currentTranslations["cookie-banner-decline"] || declineButton.textContent;
        }
    }

    document.documentElement.lang = lang;
    localStorage.setItem('selectedLanguage', lang);
    const event = new CustomEvent('languageChanged', { detail: { lang: lang } });
    document.dispatchEvent(event);
}

function getCurrentLanguage() {
    const storedLang = localStorage.getItem('selectedLanguage');
    if (storedLang && translations[storedLang]) {
        return storedLang;
    }
    const browserLang = navigator.language.split('-')[0];
    if (translations[browserLang]) {
        return browserLang;
    }

    return 'el'; // Default language if nothing is found
}

document.addEventListener('DOMContentLoaded', () => {
    const langOptions = document.querySelectorAll('.language-switcher .lang-option');

    langOptions.forEach(option => {
        option.addEventListener('click', (event) => {
            event.preventDefault();
            const selectedLang = option.getAttribute('data-lang');
            if (selectedLang) {
                translatePage(selectedLang);
                langOptions.forEach(opt => opt.classList.remove('active'));
                option.classList.add('active');
            }
        });
    });

    const initialLang = getCurrentLanguage();
    translatePage(initialLang);

    const activeOption = document.querySelector(`.language-switcher .lang-option[data-lang="${initialLang}"]`);
    if (activeOption) {
        activeOption.classList.add('active');
    }
});
